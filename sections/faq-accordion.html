<div class="faq-accordion" style="padding-top: {{default section.settings.padding_top 48}}px; padding-bottom: {{default section.settings.padding_bottom 48}}px;">
  <div class="container">
    {{#if section.settings.title}}
      <h2 class="text-3xl md:text-4xl text-center mb-10 {{#if (eq section.settings.heading_font 'tanmarjorie')}}font-tanmarjorie{{else if (eq section.settings.heading_font 'crossten-bold')}}font-crossten-bold{{else}}font-crossten-book{{/if}}" style="color: {{default section.settings.heading_color '#000000'}};">
        {{section.settings.title}}
      </h2>
    {{/if}}

    {{#if section.blocks}}
      <!-- Schema.org FAQ structured data -->
      <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "FAQPage",
          "mainEntity": [
            {{#each section.blocks}}
              {{#if (and this.settings.question this.settings.answer)}}
                {{#unless @first}},{{/unless}}
                {
                  "@type": "Question",
                  "name": "{{this.settings.question}}",
                  "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "{{this.settings.answer}}"
                  }
                }
              {{/if}}
            {{/each}}
          ]
        }
      </script>

      <div class="max-w-4xl mx-auto space-y-4">
        {{#each section.blocks}}
          {{#if (and this.settings.question this.settings.answer)}}
            <details class="faq-item border border-gray-200 rounded-lg overflow-hidden" style="border-radius: var(--button-radius, 6px);">
              <summary class="faq-question w-full px-6 py-4 cursor-pointer flex items-center justify-between hover:bg-gray-50 transition-colors focus:outline-none">
                <span class="text-lg font-bold pr-4">{{this.settings.question}}</span>
                <svg class="faq-icon w-5 h-5 text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div class="faq-answer px-6 pb-4 pt-4">
                <div class="prose prose-base max-w-none">
                  {{{this.settings.answer}}}
                </div>
              </div>
            </details>
          {{/if}}
        {{/each}}
      </div>
    {{else}}
      <div class="text-center text-gray-500">
        <p>Add FAQ items to display questions and answers.</p>
      </div>
    {{/if}}
  </div>
</div>

<style>
  .faq-icon {
    transition: transform 0.3s ease;
  }
  
  details[open] .faq-icon {
    transform: rotate(180deg);
  }
  
  details[open] .faq-question {
    border-bottom: 1px solid #e5e7eb;
  }
  
  details summary::-webkit-details-marker {
    display: none;
  }
  
  .faq-item summary {
    list-style: none;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqContainers = document.querySelectorAll('.faq-accordion');
    
    faqContainers.forEach(container => {
      const faqItems = container.querySelectorAll('.faq-item');
      
      faqItems.forEach(item => {
        item.addEventListener('toggle', function(e) {
          if (e.target.open) {
            // Close all other FAQ items in this section
            faqItems.forEach(otherItem => {
              if (otherItem !== e.target && otherItem.open) {
                otherItem.open = false;
              }
            });
          }
        });
      });
    });
  });
</script>

{{#schema}}
{
  "name": "FAQ Accordion",
  "class": "section",
  "settings": [
    {
      "type": "group_header",
      "label": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section title",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "group_header",
      "label": "Typography"
    },
    {
      "type": "select",
      "id": "heading_font",
      "label": "Heading font",
      "options": [
        {
          "value": "tanmarjorie",
          "label": "Display (Tan Marjorie)"
        },
        {
          "value": "crossten-book",
          "label": "Body (Crossten Book)"
        },
        {
          "value": "crossten-bold",
          "label": "Heading (Crossten Bold)"
        }
      ],
      "default": "crossten-bold"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "group_header",
      "label": "Section spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom",
      "default": 48
    }
  ],
  "blocks": [
    {
      "type": "faq-item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What is your return policy?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>We offer a 30-day return policy on all products. Items must be in their original condition with tags attached.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Accordion",
      "blocks": [
        {
          "type": "faq-item"
        },
        {
          "type": "faq-item"
        },
        {
          "type": "faq-item"
        }
      ]
    }
  ]
}
{{/schema}}